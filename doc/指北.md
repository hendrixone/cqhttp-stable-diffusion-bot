# QQ聊天瑟图生成机器人V0.1

by One

不懂Stable Diffusion的可以点这里[Wiki](#wiki)

## TL:DR 太长了不想看，想直接生成瑟图看这里

如果你不知道提示词是什么，建议先看[这里](#prompt)

基础使用方法：
群聊中输入 瑟图：提示词，支持中文输入但效果不佳，建议使用英文

比如：

`瑟图：1girl, outdoor`

`瑟图：有着毛茸茸尾巴的白色猫娘`

`瑟图：1girl, white hair, purple eyes, dual wielding, sword, holding sword, blue flames, glow, glowing weapon, light particles, wallpaper, chromatic aberration`

`瑟图：masterpiece, best quality, \<lyco:Ruby3:0.7>, ruby hoshino, +_+, blonde hair, expressionless, looking at viewer, 1girl, solo,, detailed eyes, upperbody, frilled dress, frilled sleeves, long sleeves, white gloves, frills,`

如果不知道怎么写的话可以前往[NovelAI tag生成器 V2.1](https://wolfchen.top/tag)

未经单独训练AI将无法通过人物名字生成特定人物（冷门人物），可以联系我去下载训练好的人物模型，下面也提供了一些群友请求的人物 [参考Lora模型](#lora-usage)

***

## 介绍

使用我的个人电脑显卡（4090）即时生成图片，一张图根据参数不同总从收到指令到输出到QQ总用时介于5-10秒。

默认使用较高规格输出，512 * 512原图通过放大算法到768*768输出，生成用时5秒左右。如果输出1024的图片耗时7秒左右

使用微调的鉴别模型进行瑟图过滤，默认的阈值为0.5，大部分瑟图的值在0.8以上，目前还没有发现漏网之鱼，需要持续观察。

### 关于参数

基础玩法只需要提供简单的提示词即可生成高质量的图片，但若想生成更加细化的图片，优先优化你的提示词，尝试使用更详细的提示词，如果只输入1girl这种会导致图片千篇一律。

支持使用lora模型，可以在[这里](#lora-usage)查看用法和现有的模型

支持进阶用法，可以在[这里](#advanced)查看用法

### 关于底模

由于照片级别的图片生成与二次元有一定的差距，两者之前切换会相对麻烦，现阶段只使用绘画风格的模型。同时避免三次元模型的伦理问题

## 支持的底模：

SD1.5, MeinaMix/Pastel, Dark Sushi Mix, Counterfeit, TMND-Mix, Anything

现阶段只支持一次运行一个底模，如何切换是个值得商榷的问题，因为切换模型用时较长（200秒）。

## 支持的Lora模型：<a id="lora"></a>

[使用方法](#lora-usage)

### 功能类：

| 功能   | 关键字                          | 参数        | 说明                                         |
|------|------------------------------|-----------|--------------------------------------------|
| 细节调整 | `<lora:add_detail:1>`        | `-2 <> 2` | 调整画面细节数字越小越扁平，越大细节越丰富。<br/>用于调整风格          |
| 衣物调整 | `<lora:ClothingAdjuster2:1>` | `-1 <> 1` | 调节衣物，色图神器，数字越大越少，越小越多。<br/>慎用！色图会被过滤器无情过滤。 |

### 人物类（持续添加中）：

人物类Lora在不同的底模下表现不同（甚至可能鬼畜），望周知
如果手打的话注意拼写和中英文，后期改进为更好的交互方式

| 人物                | 召唤                        | 相关tag (用于精准召唤，非必选，通常选择人物名字即可召唤）                                       |  |
|-------------------|---------------------------|-----------------------------------------------------------------------|--|
| HanaokaYuzu 花岗柚子  | `<lora:HanaokaYuzu:1>`    | 无                                                                     |  |
| hoshino-ruby 星野ルビ | `<lyco:hoshino-ruby:0.7>` | `ruby hoshino`                                                        |  |
| rurumu  露露姆       | `<lora:rurumu:1>`         | `rurumu, demon_tail, white_babydoll, elbow_gloves, white_gloves`      |  |
| arona  阿罗娜        | `<lora:arona:1>`          | `ARONA, WHITE HAIRBAND, BOW HAIRBAND, HALO, SHORT HAIR, SINGLE BRAID` |  |
|                   |                           |                                                                       |  |
## LORA使用方式 <a id="lora-usage"></a>

在你的提示词中加入`<lora:{lora名字}:{参数}>`即可,名字和参数参考上面的表格

比如对于细节调整lora，你可以这样写：

`1girl, white hair, purple eyes, dual wielding, sword, holding sword, <lora:add_detail:1.5>`

人物lora使用方法相对复杂,绝大部分人物lora激活需要使用lora关键字和召唤tag，上面表格中已经提供。

比如要生成阿罗娜：

`1girl, arona, white hairband, bow hairband, halo, short hair, single braid, <lora:arona:1>`

可以同时使用多个，拼写必须一致，否则会没有效果，人物lora的参数也可以调节，越低的值自由度越高

## 进阶用法

### 分辨率调整 <a id="advanced"></a>
简单方法：在召唤AI的时候使用 _"高清瑟图："_ 或 _"超清瑟图："_

比如：
`高清瑟图：1girl, white hair, purple eyes, dual wielding, sword, holding sword, blue flames`

瑟图分辨率为768x768， 高清瑟图为1024x1024，超清瑟图为1280x1280

相应的生成速度会变慢，如果请求过多的话显存可能会炸掉

### 图片数量调整
只需要召唤的时候使用”多来点”关键字即可， 比如`多来点高清瑟图：1girl`，这样将会一次生成两张图片

### 抽奖

在召唤时使用”随机“，”严格“关键字即可，比如 
`随机瑟图：1girl` 

可以与清晰度一起使用`随机高清瑟图：1girl` `严格超清瑟图：1girl`

分为三个级别，分别是随机，标准（默认，不需要指明），和严格

随机瑟图将更少的按照你的提示词生成（更加随机，放飞自我），反之则更严格遵守你的提示词生成（前提是你的提示词得够多并且达不到想要的效果，这个级别不建议使用因为实在是没啥用）

### "真" 瑟图

在召唤的时候加入”真“字即可，如`真瑟图：1girl`，这样将会解除一定的敏感内容限制。

但是聪明的小朋友就会问了，“啊，老万老万，这样号会不会没掉啊”

无所谓，内容过滤器会出手

### 更多参数

目前没这个需求，毕竟只是个娱乐项目，真的对画图感兴趣就自行去了解吧

<br><br>

## 概念介绍 <a id="wiki"></a>

稍微了解一下Stable Diffusion

Stable Diffusion是2022年发布的深度学习文本到图像生成模型。它主要用于根据文本的描述产生详细图像，尽管它也可以应用于其他任务，如内补绘制、外补绘制，以及在提示词指导下产生图生图的翻译。

***

#### prompt 提示词 <a id="prompt"></a>

prompt是一个字符串，用于描述你想要生成的图片的内容，比如：

`1girl, white hair, purple eyes, dual wielding, sword, holding sword, blue flames, glow, glowing weapon, light particles, wallpaper, chromatic aberration`

AI便会根据这个prompt生成包含里面元素的内容。

可以使用中文和自然语言去描述，比如：`在房子里的一只白发猫娘，蓝色眼睛，身穿裙子` 但是通常不会特别准确，所以建议使用英文（英文发涩涩的东西不会尴尬）。

在线提示词网站 https://wolfchen.top/tag (强烈推荐使用！)

***

#### negative prompt 负面提示词

用于描述你不想要的内容，比如：

`EasyNegative, badhandv4, (nsfw), (nude)`

注意，EasyNegative, badhandv4是提前生成的textual inversion，必须安装了才可以使用

***

#### Embedding

Embedding”编译“好的词，一个词顶很多，通常用于负面，比如：
EasyNegative, badhandv4

***

#### 底模 Base Model

用于生成图片的模型，通常是一个预训练好的模型，比如： Stable Diffusion 1.5

绝大多数的模型都是基于1.5微调的（因为1.5瑟瑟能力更高，2.0比较SFW）

***

#### 什么是Lora
自行搜索，简短的说就是一段额外的信息喂给模型，让AI更聪明，实现更加细致的任务

***
